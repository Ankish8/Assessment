{"ast":null,"code":"import r, { useContext as e, createContext as t, useRef as n, useCallback as o, useMemo as l } from \"react\";\nvar u = t(void 0),\n  c = function (e) {\n    var t = e.value,\n      c = e.children,\n      i = t.setIsScrolled,\n      a = n(null),\n      f = n(null),\n      d = n(0),\n      s = o(function (r, e) {\n        if (r !== d.current) {\n          \"body\" === e && a.current && (a.current.scrollLeft = r), \"head\" === e && f.current && (f.current.scrollLeft = r);\n          var t = r > 0;\n          i(function (r) {\n            return r !== t ? t : r;\n          }), d.current = r;\n        }\n      }, [i]),\n      v = o(function (r) {\n        s(r.target.scrollLeft, \"head\");\n      }, [s]),\n      b = o(function (r) {\n        s(r.target.scrollLeft, \"body\");\n      }, [s]),\n      h = l(function () {\n        return Object.assign(Object.assign({}, t), {\n          headRef: a,\n          onHeadScroll: v,\n          virtualizedListRef: f,\n          onVirtualizedListScroll: b\n        });\n      }, [t, v, b]);\n    return r.createElement(u.Provider, {\n      value: h\n    }, c);\n  },\n  i = function () {\n    var r = e(u);\n    if (void 0 === r) throw Error(\"useTable must be used within a TableProvider\");\n    return r;\n  };\nexport { c as TableProvider, i as useTable };","map":{"version":3,"names":["u","t","c","TableProvider","e","value","children","i","setIsScrolled","a","n","f","d","s","o","r","current","scrollLeft","v","target","b","h","l","Object","assign","headRef","onHeadScroll","virtualizedListRef","onVirtualizedListScroll","createElement","Provider","useTable","Error"],"sources":["/Users/ankish/Downloads/MA/MAPIT/untitledUi/node_modules/@vibe/core/src/components/Table/context/TableContext/TableContext.tsx"],"sourcesContent":["import React, { createContext, UIEventHandler, useCallback, useContext, useMemo, useRef } from \"react\";\nimport { TableContext as ITableContext, TableProviderProps } from \"./TableContext.types\";\n\nconst TableContext = createContext<ITableContext | undefined>(undefined);\n\nexport const TableProvider = ({ value, children }: TableProviderProps) => {\n  const { setIsScrolled } = value;\n  const headRef = useRef<HTMLDivElement>(null);\n  const virtualizedListRef = useRef<HTMLDivElement>(null);\n  const lastScrollLeft = useRef<number>(0);\n\n  const syncScroll = useCallback(\n    (newScrollLeft: number, source: \"head\" | \"body\") => {\n      if (newScrollLeft === lastScrollLeft.current) return;\n\n      if (source === \"body\" && headRef.current) {\n        headRef.current.scrollLeft = newScrollLeft;\n      }\n      if (source === \"head\" && virtualizedListRef.current) {\n        virtualizedListRef.current.scrollLeft = newScrollLeft;\n      }\n\n      const hasScroll = newScrollLeft > 0;\n      setIsScrolled(prevScroll => (prevScroll !== hasScroll ? hasScroll : prevScroll));\n\n      lastScrollLeft.current = newScrollLeft;\n    },\n    [setIsScrolled]\n  );\n\n  const onHeadScroll: UIEventHandler<HTMLDivElement> = useCallback(\n    e => {\n      const newLeft = (e.target as HTMLDivElement).scrollLeft;\n      syncScroll(newLeft, \"head\");\n    },\n    [syncScroll]\n  );\n\n  const onVirtualizedListScroll = useCallback<UIEventHandler<HTMLDivElement>>(\n    e => {\n      const newLeft = (e.target as HTMLDivElement).scrollLeft;\n      syncScroll(newLeft, \"body\");\n    },\n    [syncScroll]\n  );\n\n  const contextValue = useMemo<ITableContext>(\n    () => ({\n      ...value,\n      headRef,\n      onHeadScroll,\n      virtualizedListRef,\n      onVirtualizedListScroll\n    }),\n    [value, onHeadScroll, onVirtualizedListScroll]\n  );\n\n  return <TableContext.Provider value={contextValue}>{children}</TableContext.Provider>;\n};\n\nexport const useTable = () => {\n  const context = useContext(TableContext);\n  if (context === undefined) {\n    throw new Error(\"useTable must be used within a TableProvider\");\n  }\n  return context;\n};\n"],"mappings":";AAGA,IAAMA,CAAA,GAAeC,CAAA,MAAyC;EAEjDC,CAAA,GAAgB,SAAAC,CAAHC,CAAA;IAA+C,IAAzCH,CAAA,GAAKG,CAAA,CAALC,KAAA;MAAOH,CAAA,GAAQE,CAAA,CAARE,QAAA;MAC7BC,CAAA,GAAkBN,CAAA,CAAlBO,aAAA;MACFC,CAAA,GAAUC,CAAA,CAAuB;MACjCC,CAAA,GAAqBD,CAAA,CAAuB;MAC5CE,CAAA,GAAiBF,CAAA,CAAe;MAEhCG,CAAA,GAAaC,CAAA,CACjB,UAACC,CAAA,EAAuBX,CAAA;QACtB,IAAIW,CAAA,KAAkBH,CAAA,CAAeI,OAAA,EAArC;UAEe,WAAXZ,CAAA,IAAqBK,CAAA,CAAQO,OAAA,KAC/BP,CAAA,CAAQO,OAAA,CAAQC,UAAA,GAAaF,CAAA,GAEhB,WAAXX,CAAA,IAAqBO,CAAA,CAAmBK,OAAA,KAC1CL,CAAA,CAAmBK,OAAA,CAAQC,UAAA,GAAaF,CAAA;UAG1C,IAAMd,CAAA,GAAYc,CAAA,GAAgB;UAClCR,CAAA,CAAc,UAAAQ,CAAA;YAAU,OAAKA,CAAA,KAAed,CAAA,GAAYA,CAAA,GAAYc,CAAU;UAAA,IAE9EH,CAAA,CAAeI,OAAA,GAAUD,CAZqB;QAAA;MAahD,GACA,CAACR,CAAA;MAGGW,CAAA,GAA+CJ,CAAA,CACnD,UAAAC,CAAA;QAEEF,CAAA,CADiBE,CAAA,CAAEI,MAAA,CAA0BF,UAAA,EACzB,OACtB;MAAA,GACA,CAACJ,CAAA;MAGGO,CAAA,GAA0BN,CAAA,CAC9B,UAAAC,CAAA;QAEEF,CAAA,CADiBE,CAAA,CAAEI,MAAA,CAA0BF,UAAA,EACzB,OACtB;MAAA,GACA,CAACJ,CAAA;MAGGQ,CAAA,GAAeC,CAAA,CACnB;QAAA,OAAMC,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACDvB,CAAA,GAAK;UACRwB,OAAA,EAAAhB,CAAA;UACAiB,YAAA,EAAAR,CAAA;UACAS,kBAAA,EAAAhB,CAAA;UACAiB,uBAAA,EAAAR;QAAA,EACA;MAAA,GACF,CAACnB,CAAA,EAAOiB,CAAA,EAAcE,CAAA;IAGxB,OAAOL,CAAA,CAAAc,aAAA,CAAC7B,CAAA,CAAa8B,QAAA,EAAQ;MAACzB,KAAA,EAAOgB;IAAA,GAAenB,CAAA,CACtD;EAAA;EAEaK,CAAA,GAAW,SAAAwB,CAAA;IACtB,IAAMhB,CAAA,GAAUX,CAAA,CAAWJ,CAAA;IAC3B,SAAgB,MAAZe,CAAA,EACF,MAAUiB,KAAA,CAAM;IAElB,OAAOjB,CACT;EAAA;AAAA,SAAAb,CAAA,IAAAC,aAAA,EAAAI,CAAA,IAAAwB,QAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}