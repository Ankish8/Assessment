{"ast":null,"code":"import { slicedToArray as t } from \"../../../_virtual/_rollupPluginBabelHelpers.js\";\nimport e from \"classnames\";\nimport r, { forwardRef as i, useRef as o, useState as s, useCallback as n, useEffect as a, useMemo as l } from \"react\";\nimport c from \"../../hooks/useMergeRef.js\";\nimport u from \"../../hooks/useKeyEvent/index.js\";\nimport { VirtualizedListItems as m } from \"./VirtualizedListItems/VirtualizedListItems.js\";\nimport { keyCodes as d, UP_DOWN_ARROWS as f } from \"../../constants/keyCodes.js\";\nimport { withStaticProps as p } from \"../../types/withStaticProps.js\";\nimport \"../../utils/colors-vars-map.js\";\nimport { ListWrapperComponentType as v } from \"./ListConstants.js\";\nimport { getTestId as b, ComponentDefaultTestId as y } from \"../../tests/testIds.js\";\nimport { ListContext as j } from \"./utils/ListContext.js\";\nimport { useListId as I, getListItemIndexById as L, getNextListItemIndex as x, getPrevListItemIndex as h, getListItemIdByIndex as k, isListItem as A, getListItemComponentType as E } from \"./utils/ListUtils.js\";\nimport g from \"./List.module.scss.js\";\nimport { ComponentVibeId as R } from \"../../tests/constants.js\";\nvar C = p(i(function (i, p) {\n  var C = i.className,\n    O = i.id,\n    P = i.component,\n    T = void 0 === P ? v.UL : P,\n    V = i.children,\n    _ = i.ariaLabel,\n    D = i.ariaDescribedBy,\n    N = i[\"aria-controls\"],\n    S = i.renderOnlyVisibleItems,\n    U = void 0 !== S && S,\n    W = i.style,\n    z = i.role,\n    B = void 0 === z ? \"listbox\" : z,\n    H = i[\"data-testid\"],\n    M = o(null),\n    w = c(p, M),\n    F = o([]),\n    K = I(O),\n    q = s(0),\n    G = t(q, 2),\n    J = G[0],\n    Q = G[1],\n    X = T,\n    Y = n(function (t) {\n      var e;\n      Q(L(F, t)), null === (e = null == M ? void 0 : M.current) || void 0 === e || e.setAttribute(\"aria-activedescendant\", t);\n    }, []),\n    Z = n(function (t) {\n      if (!U) {\n        t.preventDefault();\n        var e = t.key === d.UP_ARROW,\n          r = void 0;\n        t.key === d.DOWN_ARROW && F.current.length > J + 1 ? r = x(J, F) : e && J > 0 && (r = h(J, F)), void 0 !== r && (Y(k(F, r)), F.current[r].focus());\n      }\n    }, [J, U, Y]);\n  u({\n    keys: f,\n    callback: Z,\n    ref: M\n  }), a(function () {\n    var t = F.current.findIndex(function (t) {\n      return t instanceof HTMLElement && A(t) && \"true\" === (null == t ? void 0 : t.getAttribute(\"aria-selected\"));\n    });\n    if (-1 !== t) Y(k(F, t));else {\n      var e = F.current.findIndex(function (t) {\n        return A(t);\n      });\n      -1 !== e && Y(k(F, e));\n    }\n  }, [Y]);\n  var $ = l(function () {\n    var t = Array.isArray(V) ? V : [V];\n    return U ? t = r.createElement(m, null, t) : (F.current = F.current.slice(0, t.length), t = r.Children.map(t, function (t, e) {\n      if (!r.isValidElement(t)) return t;\n      var i = t.props.id || \"\".concat(K, \"-item-\").concat(e),\n        o = F.current[e],\n        s = null == o || A(o);\n      return r.cloneElement(t, {\n        ref: function (t) {\n          return F.current[e] = t;\n        },\n        tabIndex: J === e && s ? 0 : -1,\n        id: i,\n        component: E(T),\n        role: t.props.role\n      });\n    })), t;\n  }, [V, T, J, K, U]);\n  return r.createElement(j.Provider, {\n    value: {\n      updateFocusedItem: Y\n    }\n  }, r.createElement(X, {\n    \"data-testid\": H || b(y.LIST, O),\n    \"data-vibe\": R.LIST,\n    ref: w,\n    style: W,\n    className: e(g.list, C),\n    id: K,\n    \"aria-label\": _,\n    \"aria-describedby\": D,\n    \"aria-controls\": N,\n    tabIndex: -1,\n    role: B\n  }, $));\n}), {\n  components: v\n});\nexport { C as default };","map":{"version":3,"names":["C","p","i","className","O","id","P","component","T","v","UL","V","children","_","ariaLabel","D","ariaDescribedBy","N","S","renderOnlyVisibleItems","U","W","style","z","role","B","H","M","o","w","c","F","K","I","q","s","G","t","J","Q","X","Y","n","e","L","current","setAttribute","Z","preventDefault","key","d","UP_ARROW","r","DOWN_ARROW","length","x","h","k","focus","u","keys","f","callback","ref","a","findIndex","HTMLElement","A","getAttribute","$","l","Array","isArray","createElement","m","slice","Children","map","isValidElement","props","concat","cloneElement","tabIndex","E","j","Provider","value","updateFocusedItem","b","y","LIST","R","g","list","components","default"],"sources":["/Users/ankish/Downloads/MA/MAPIT/untitledUi/node_modules/@vibe/core/src/components/List/List.tsx"],"sourcesContent":["import cx from \"classnames\";\nimport React, {\n  AriaAttributes,\n  AriaRole,\n  CSSProperties,\n  forwardRef,\n  ReactElement,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState\n} from \"react\";\nimport useMergeRef from \"../../hooks/useMergeRef\";\nimport useKeyEvent from \"../../hooks/useKeyEvent\";\nimport { VirtualizedListItems } from \"./VirtualizedListItems/VirtualizedListItems\";\nimport { keyCodes, UP_DOWN_ARROWS } from \"../../constants/keyCodes\";\nimport { withStaticProps, VibeComponentProps } from \"../../types\";\nimport { ListItemProps } from \"../ListItem/ListItem\";\nimport { ListTitleProps } from \"../ListTitle/ListTitle\";\nimport { ListWrapperComponentType as ListWrapperComponentTypeEnum } from \"./ListConstants\";\nimport { ListElement } from \"./List.types\";\nimport { ComponentDefaultTestId, getTestId } from \"../../tests/test-ids-utils\";\nimport { ListContext } from \"./utils/ListContext\";\nimport {\n  getListItemComponentType,\n  getListItemIdByIndex,\n  getListItemIndexById,\n  getNextListItemIndex,\n  getPrevListItemIndex,\n  isListItem,\n  useListId\n} from \"./utils/ListUtils\";\nimport styles from \"./List.module.scss\";\nimport { ComponentVibeId } from \"../../tests/constants\";\n\nexport interface ListProps extends VibeComponentProps {\n  /**\n   * The wrapping component for the list.\n   */\n  component?: ListElement;\n  /**\n   * The ARIA label describing the list.\n   */\n  ariaLabel?: string;\n  /**\n   * The ID of an element that describes the list.\n   */\n  ariaDescribedBy?: string;\n  /**\n   * The ID of an element controlled by the list.\n   */\n  \"aria-controls\"?: AriaAttributes[\"aria-controls\"];\n  /**\n   * The child elements inside the list.\n   */\n  children?: ReactElement<ListItemProps | ListTitleProps> | ReactElement<ListItemProps | ListTitleProps>[];\n  /**\n   * If true, uses a virtualized list to render only visible items for performance optimization.\n   */\n  renderOnlyVisibleItems?: boolean;\n  /**\n   * Custom inline styles applied to the list.\n   */\n  style?: CSSProperties;\n  /**\n   * The ARIA role of the list.\n   */\n  role?: AriaRole;\n}\n\nconst List = forwardRef(\n  (\n    {\n      className,\n      id,\n      component = ListWrapperComponentTypeEnum.UL,\n      children,\n      ariaLabel,\n      ariaDescribedBy,\n      \"aria-controls\": ariaControls,\n      renderOnlyVisibleItems = false,\n      style,\n      role = \"listbox\",\n      \"data-testid\": dataTestId\n    }: ListProps,\n    ref: React.ForwardedRef<HTMLElement>\n  ) => {\n    const componentRef = useRef(null);\n    const mergedRef = useMergeRef(ref, componentRef);\n    const childrenRefs: React.MutableRefObject<HTMLElement[]> = useRef([]);\n\n    const overrideId = useListId(id);\n    const [focusIndex, setFocusIndex] = useState(0);\n    const Component = component;\n\n    const updateFocusedItem = useCallback((id: string) => {\n      setFocusIndex(getListItemIndexById(childrenRefs, id));\n      componentRef?.current?.setAttribute(\"aria-activedescendant\", id);\n    }, []);\n\n    const onUpDownArrows = useCallback(\n      (event: KeyboardEvent) => {\n        if (renderOnlyVisibleItems) {\n          return;\n        }\n        event.preventDefault();\n\n        const isUpKey = event.key === keyCodes.UP_ARROW;\n        const isDownKey = event.key === keyCodes.DOWN_ARROW;\n        let overrideFocusIndex = undefined;\n\n        if (isDownKey && focusIndex + 1 < childrenRefs.current.length) {\n          overrideFocusIndex = getNextListItemIndex(focusIndex, childrenRefs);\n        } else if (isUpKey && focusIndex > 0) {\n          overrideFocusIndex = getPrevListItemIndex(focusIndex, childrenRefs);\n        }\n        if (overrideFocusIndex !== undefined) {\n          updateFocusedItem(getListItemIdByIndex(childrenRefs, overrideFocusIndex));\n          childrenRefs.current[overrideFocusIndex].focus();\n        }\n      },\n      [focusIndex, renderOnlyVisibleItems, updateFocusedItem]\n    );\n\n    useKeyEvent({\n      keys: UP_DOWN_ARROWS,\n      callback: onUpDownArrows,\n      ref: componentRef\n    });\n\n    useEffect(() => {\n      const selectedItemIndex = childrenRefs.current.findIndex(\n        child => child instanceof HTMLElement && isListItem(child) && child?.getAttribute(\"aria-selected\") === \"true\"\n      );\n      if (selectedItemIndex !== -1) {\n        updateFocusedItem(getListItemIdByIndex(childrenRefs, selectedItemIndex));\n      } else {\n        const firstFocusableIndex = childrenRefs.current.findIndex(child => isListItem(child));\n        if (firstFocusableIndex !== -1) {\n          updateFocusedItem(getListItemIdByIndex(childrenRefs, firstFocusableIndex));\n        }\n      }\n    }, [updateFocusedItem]);\n\n    const overrideChildren = useMemo(() => {\n      let override: ReactElement | ReactElement[] = Array.isArray(children) ? children : [children];\n      if (renderOnlyVisibleItems) {\n        override = <VirtualizedListItems>{override}</VirtualizedListItems>;\n      } else {\n        childrenRefs.current = childrenRefs.current.slice(0, override.length);\n        override = React.Children.map(override, (child, index) => {\n          if (!React.isValidElement(child)) {\n            return child;\n          }\n          const id = (child.props as ListItemProps).id || `${overrideId}-item-${index}`;\n          const currentRef = childrenRefs.current[index];\n          const isFocusableItem = currentRef === undefined || currentRef === null || isListItem(currentRef);\n          return React.cloneElement(child, {\n            // @ts-ignore not sure how to deal with ref here\n            ref: ref => (childrenRefs.current[index] = ref),\n            tabIndex: focusIndex === index && isFocusableItem ? 0 : -1,\n            id,\n            component: getListItemComponentType(component),\n            role: (child.props as ListItemProps).role\n          });\n        });\n      }\n\n      return override;\n    }, [children, component, focusIndex, overrideId, renderOnlyVisibleItems]);\n\n    return (\n      <ListContext.Provider value={{ updateFocusedItem }}>\n        <Component\n          data-testid={dataTestId || getTestId(ComponentDefaultTestId.LIST, id)}\n          data-vibe={ComponentVibeId.LIST}\n          ref={mergedRef}\n          style={style}\n          className={cx(styles.list, className)}\n          id={overrideId}\n          aria-label={ariaLabel}\n          aria-describedby={ariaDescribedBy}\n          aria-controls={ariaControls}\n          tabIndex={-1}\n          role={role}\n        >\n          {overrideChildren}\n        </Component>\n      </ListContext.Provider>\n    );\n  }\n);\n\ninterface ListStaticProps {\n  components: typeof ListWrapperComponentTypeEnum;\n}\n\nexport default withStaticProps<ListProps, ListStaticProps>(List, {\n  components: ListWrapperComponentTypeEnum\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}