{"ast":null,"code":"import { slicedToArray as e, toConsumableArray as o, defineProperty as n } from \"../../../../_virtual/_rollupPluginBabelHelpers.js\";\nimport a from \"classnames\";\nimport t, { forwardRef as r, useRef as i, useState as s, useMemo as l, useCallback as c } from \"react\";\nimport d from \"../../../hooks/useMergeRef.js\";\nimport m from \"./Accordion.module.scss.js\";\nimport { ComponentVibeId as u } from \"../../../tests/constants.js\";\nvar p = \"monday-accordion\";\nvar f = r(function (r, f) {\n  var v = r.children,\n    C = void 0 === v ? null : v,\n    b = r.allowMultiple,\n    j = void 0 !== b && b,\n    g = r[\"data-testid\"],\n    h = void 0 === g ? p : g,\n    x = r.defaultIndex,\n    A = void 0 === x ? [] : x,\n    O = r.className,\n    y = void 0 === O ? \"\" : O,\n    E = r.id,\n    I = i(null),\n    N = d(f, I),\n    k = s(A),\n    M = e(k, 2),\n    P = M[0],\n    R = M[1],\n    _ = l(function () {\n      return t.Children.toArray(C);\n    }, [C]),\n    w = c(function (e) {\n      return P.includes(e);\n    }, [P]),\n    B = c(function (e) {\n      if (j) {\n        var n = o(P);\n        if (w(e)) {\n          var a = n.indexOf(e);\n          a > -1 && n.splice(a, 1);\n        } else n.push(e);\n        R(n);\n      } else w(e) ? R([]) : R([e]);\n    }, [w, P, j]),\n    D = l(function () {\n      return t.Children.map(_, function (e, o) {\n        var r,\n          i,\n          s,\n          l = Object.assign({}, null == e ? void 0 : e.props),\n          c = (r = o, s = E, (i = l).id ? i.id : s ? \"\".concat(s, \"--item-\").concat(r) : \"\".concat(p, \"--item-\").concat(r));\n        return t.cloneElement(e, Object.assign(Object.assign({}, l), {\n          id: c,\n          onClickAccordionCallback: function () {\n            B(o);\n          },\n          open: w(o),\n          expandCollapseComponentClassName: a(m.accordionItemExpandCollapse, n({}, m.accordionItemExpandCollapseLast, o === _.length - 1))\n        }));\n      });\n    }, [_, E, w, B]);\n  return t.createElement(\"div\", {\n    ref: N,\n    className: a(m.accordion, y),\n    \"data-testid\": h,\n    \"data-vibe\": u.ACCORDION,\n    id: E\n  }, _ && D);\n});\nexport { f as default };","map":{"version":3,"names":["p","f","r","v","children","C","b","allowMultiple","j","g","h","x","defaultIndex","A","O","className","y","E","id","I","i","N","d","k","s","M","e","P","R","_","l","t","Children","toArray","w","c","includes","B","n","o","a","indexOf","splice","push","D","map","Object","assign","props","concat","cloneElement","onClickAccordionCallback","open","expandCollapseComponentClassName","m","accordionItemExpandCollapse","accordionItemExpandCollapseLast","length","createElement","ref","accordion","u","ACCORDION","default"],"sources":["/Users/ankish/Downloads/MA/MAPIT/untitledUi/node_modules/@vibe/core/src/components/Accordion/Accordion/Accordion.tsx"],"sourcesContent":["import cx from \"classnames\";\nimport React, { forwardRef, ReactElement, useCallback, useMemo, useRef, useState } from \"react\";\nimport useMergeRef from \"../../../hooks/useMergeRef\";\nimport { VibeComponentProps } from \"../../../types\";\nimport styles from \"./Accordion.module.scss\";\nimport { ComponentVibeId } from \"../../../tests/constants\";\n\nconst COMPONENT_ID = \"monday-accordion\";\n\nfunction defineChildId(index: number, props: { id: string }, accordionId: string) {\n  if (props.id) {\n    return props.id;\n  }\n  if (accordionId) {\n    return `${accordionId}--item-${index}`;\n  }\n  return `${COMPONENT_ID}--item-${index}`;\n}\n\nexport interface AccordionProps extends VibeComponentProps {\n  /**\n   * The content of the accordion (`AccordionItem` components).\n   */\n  children?: Array<ReactElement> | ReactElement;\n  /**\n   * If true, multiple accordion items can be expanded at the same time.\n   */\n  allowMultiple?: boolean;\n  /**\n   * An array of initially expanded item indexes.\n   */\n  defaultIndex?: Array<number>;\n}\n\nconst Accordion = forwardRef(\n  (\n    {\n      children: originalChildren = null,\n      allowMultiple = false,\n      \"data-testid\": dataTestId = COMPONENT_ID,\n      defaultIndex = [],\n      className = \"\",\n      id\n    }: AccordionProps,\n    ref: React.ForwardedRef<unknown>\n  ) => {\n    const componentRef = useRef(null);\n    const mergedRef = useMergeRef(ref, componentRef);\n\n    const [expandedItems, setExpandedItems] = useState(defaultIndex);\n\n    const children = useMemo(() => React.Children.toArray(originalChildren), [originalChildren]);\n\n    const isChildExpanded = useCallback(\n      (itemIndex: number) => {\n        return expandedItems.includes(itemIndex);\n      },\n      [expandedItems]\n    );\n\n    const onChildClick = useCallback(\n      (itemIndex: number) => {\n        if (allowMultiple) {\n          const newExpandedItems = [...expandedItems];\n          if (isChildExpanded(itemIndex)) {\n            const index = newExpandedItems.indexOf(itemIndex);\n            if (index > -1) {\n              newExpandedItems.splice(index, 1);\n            }\n          } else {\n            newExpandedItems.push(itemIndex);\n          }\n          setExpandedItems(newExpandedItems);\n          return;\n        }\n\n        if (isChildExpanded(itemIndex)) {\n          setExpandedItems([]);\n        } else {\n          setExpandedItems([itemIndex]);\n        }\n      },\n      [isChildExpanded, expandedItems, allowMultiple]\n    );\n\n    const renderChildElements = useMemo(() => {\n      return React.Children.map(children, (child: ReactElement, itemIndex) => {\n        const originalProps = { ...child?.props };\n        const childId = defineChildId(itemIndex, originalProps, id);\n        return React.cloneElement(child, {\n          ...originalProps,\n          id: childId,\n          onClickAccordionCallback: () => {\n            onChildClick(itemIndex);\n          },\n          open: isChildExpanded(itemIndex),\n          expandCollapseComponentClassName: cx(styles.accordionItemExpandCollapse, {\n            [styles.accordionItemExpandCollapseLast]: itemIndex === children.length - 1\n          })\n        });\n      });\n    }, [children, id, isChildExpanded, onChildClick]);\n\n    return (\n      <div\n        ref={mergedRef}\n        className={cx(styles.accordion, className)}\n        data-testid={dataTestId}\n        data-vibe={ComponentVibeId.ACCORDION}\n        id={id}\n      >\n        {children && renderChildElements}\n      </div>\n    );\n  }\n);\n\nexport default Accordion;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}