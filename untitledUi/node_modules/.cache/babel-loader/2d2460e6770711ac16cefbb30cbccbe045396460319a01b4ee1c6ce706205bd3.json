{"ast":null,"code":"import { slicedToArray as e, defineProperty as t } from \"../../../../_virtual/_rollupPluginBabelHelpers.js\";\nimport o, { forwardRef as r, useRef as a, useState as i, useCallback as s, useMemo as n } from \"react\";\nimport l from \"classnames\";\nimport { RemoveScroll as m } from \"react-remove-scroll\";\nimport c from \"react-focus-lock\";\nimport { AnimatePresence as d, motion as u } from \"framer-motion\";\nimport { getTestId as f } from \"../../../tests/testIds.js\";\nimport { ComponentDefaultTestId as p } from \"../../../tests/constants.js\";\nimport v from \"./Modal.module.scss.js\";\nimport y from \"../ModalTopActions/ModalTopActions.js\";\nimport { getStyle as E } from \"../../../helpers/typesciptCssModulesHelper.js\";\nimport { camelCase as b } from \"lodash-es\";\nimport { ModalProvider as j } from \"../context/ModalContext.js\";\nimport { keyCodes as A } from \"../../../constants/keyCodes.js\";\nimport \"../../../constants/sizes.js\";\nimport { modalAnimationFullViewVariants as h, modalAnimationAnchorPopVariants as x, modalAnimationCenterPopVariants as M, modalAnimationOverlayVariants as T } from \"../utils/animationVariants.js\";\nimport { createPortal as L } from \"react-dom\";\nimport P from \"../hooks/usePortalTarget/usePortalTarget.js\";\nimport C from \"../../LayerProvider/LayerProvider.js\";\nimport k from \"../../../hooks/useMergeRef.js\";\nvar w = c.default || c,\n  I = r(function (r, c) {\n    var I = r.id,\n      N = r.show,\n      g = r.size,\n      z = void 0 === g ? \"medium\" : g,\n      F = r.renderHeaderAction,\n      H = r.closeButtonTheme,\n      _ = r.closeButtonAriaLabel,\n      B = r.onClose,\n      D = void 0 === B ? function () {} : B,\n      R = r.autoFocus,\n      O = void 0 === R || R,\n      V = r.onFocusAttempt,\n      X = r.anchorElementRef,\n      K = r.alertModal,\n      S = r.container,\n      Y = void 0 === S ? document.body : S,\n      q = r.children,\n      G = r.style,\n      J = r.zIndex,\n      Q = r.className,\n      U = r[\"data-testid\"],\n      W = r[\"aria-labelledby\"],\n      Z = r[\"aria-describedby\"],\n      $ = P(Y),\n      ee = a(null),\n      te = k(c, ee),\n      oe = a(null),\n      re = i(),\n      ae = e(re, 2),\n      ie = ae[0],\n      se = ae[1],\n      ne = i(),\n      le = e(ne, 2),\n      me = le[0],\n      ce = le[1],\n      de = s(function (e) {\n        W || se(e);\n      }, [W]),\n      ue = s(function (e) {\n        Z || ce(e);\n      }, [Z]),\n      fe = n(function () {\n        return {\n          modalId: I,\n          setTitleId: de,\n          setDescriptionId: ue,\n          autoFocus: O\n        };\n      }, [I, de, ue, O]),\n      pe = s(function (e) {\n        N && !K && D(e);\n      }, [N, K, D]),\n      ve = s(function (e) {\n        e.key === A.ESCAPE && N && !K && D(e);\n      }, [K, D, N]),\n      ye = \"full-view\" === z ? h : (null == X ? void 0 : X.current) ? x : M,\n      Ee = J ? {\n        \"--monday-modal-z-index\": J\n      } : {},\n      be = s(function (e) {\n        if (!V) return !0;\n        var t = V(e);\n        return !0 === t || t instanceof HTMLElement && (t.focus(), !1);\n      }, [V]);\n    return o.createElement(d, null, N && o.createElement(C, {\n      layerRef: oe\n    }, o.createElement(j, {\n      value: fe\n    }, L(o.createElement(w, {\n      returnFocus: !0,\n      autoFocus: O,\n      whiteList: be\n    }, o.createElement(\"div\", {\n      ref: oe,\n      className: v.container,\n      style: Ee\n    }, o.createElement(u.div, {\n      variants: T,\n      initial: \"initial\",\n      animate: \"enter\",\n      exit: \"exit\",\n      \"data-testid\": f(p.MODAL_NEXT_OVERLAY, I),\n      className: v.overlay,\n      onClick: pe,\n      \"aria-hidden\": !0\n    }), o.createElement(m, {\n      forwardProps: !0,\n      ref: te\n    }, o.createElement(u.div, {\n      variants: ye,\n      initial: \"exit\",\n      animate: \"enter\",\n      exit: \"exit\",\n      custom: X,\n      className: l(v.modal, E(v, b(\"size-\" + z)), t({}, v.withHeaderAction, !!F), Q),\n      id: I,\n      \"data-testid\": U || f(p.MODAL_NEXT, I),\n      role: \"dialog\",\n      \"aria-modal\": !0,\n      \"aria-labelledby\": W || ie,\n      \"aria-describedby\": Z || me,\n      style: G,\n      onKeyDown: ve,\n      tabIndex: -1\n    }, q, o.createElement(y, {\n      renderAction: F,\n      theme: H,\n      closeButtonAriaLabel: _,\n      onClose: D\n    }))))), $))));\n  });\nexport { I as default };","map":{"version":3,"names":["w","c","default","I","r","id","N","show","g","size","z","F","renderHeaderAction","H","closeButtonTheme","_","closeButtonAriaLabel","B","onClose","D","R","autoFocus","O","V","onFocusAttempt","X","anchorElementRef","K","alertModal","S","container","Y","document","body","q","children","G","style","J","zIndex","Q","className","U","W","Z","$","P","ee","a","te","k","oe","re","i","ae","e","ie","se","ne","le","me","ce","de","s","ue","fe","n","modalId","setTitleId","setDescriptionId","pe","ve","key","A","ESCAPE","ye","h","current","x","M","Ee","be","t","HTMLElement","focus","o","createElement","d","C","layerRef","j","value","L","returnFocus","whiteList","ref","v","u","div","variants","T","initial","animate","exit","f","p","MODAL_NEXT_OVERLAY","overlay","onClick","m","forwardProps","custom","l","modal","E","b","withHeaderAction","MODAL_NEXT","role","onKeyDown","tabIndex","y","renderAction","theme"],"sources":["/Users/ankish/Downloads/MA/MAPIT/untitledUi/node_modules/@vibe/core/src/components/Modal/Modal/Modal.tsx"],"sourcesContent":["import React, { forwardRef, useCallback, useMemo, useRef, useState } from \"react\";\nimport cx from \"classnames\";\nimport { RemoveScroll } from \"react-remove-scroll\";\nimport FocusLock from \"react-focus-lock\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { getTestId } from \"../../../tests/test-ids-utils\";\nimport { ComponentDefaultTestId } from \"../../../tests/constants\";\nimport styles from \"./Modal.module.scss\";\nimport { ModalProps } from \"./Modal.types\";\nimport ModalTopActions from \"../ModalTopActions/ModalTopActions\";\nimport { getStyle } from \"../../../helpers/typesciptCssModulesHelper\";\nimport { camelCase } from \"lodash-es\";\nimport { ModalProvider } from \"../context/ModalContext\";\nimport { ModalProviderValue } from \"../context/ModalContext.types\";\nimport { keyCodes } from \"../../../constants\";\nimport {\n  modalAnimationAnchorPopVariants,\n  modalAnimationCenterPopVariants,\n  modalAnimationFullViewVariants,\n  modalAnimationOverlayVariants\n} from \"../utils/animationVariants\";\nimport { createPortal } from \"react-dom\";\nimport usePortalTarget from \"../hooks/usePortalTarget/usePortalTarget\";\nimport { LayerProvider } from \"../../LayerProvider\";\nimport useMergeRef from \"../../../hooks/useMergeRef\";\n\n// @ts-expect-error This is a precaution to support all possible module systems (ESM/CJS)\nconst FocusLockComponent = (FocusLock.default || FocusLock) as typeof FocusLock;\n\nconst Modal = forwardRef(\n  (\n    {\n      id,\n      show,\n      size = \"medium\",\n      renderHeaderAction,\n      closeButtonTheme,\n      closeButtonAriaLabel,\n      onClose = () => {},\n      autoFocus = true,\n      onFocusAttempt,\n      anchorElementRef,\n      alertModal,\n      container = document.body,\n      children,\n      style,\n      zIndex,\n      className,\n      \"data-testid\": dataTestId,\n      \"aria-labelledby\": ariaLabelledby,\n      \"aria-describedby\": ariaDescribedby\n    }: ModalProps,\n    ref: React.ForwardedRef<HTMLDivElement>\n  ) => {\n    const portalTargetElement = usePortalTarget(container);\n\n    const modalRef = useRef<HTMLDivElement>(null);\n    const modalMergedRef = useMergeRef<HTMLDivElement>(ref, modalRef);\n    const containerRef = useRef<HTMLDivElement>(null);\n\n    const [titleId, setTitleId] = useState<string>();\n    const [descriptionId, setDescriptionId] = useState<string>();\n\n    const setTitleIdCallback = useCallback(\n      (newId: string) => {\n        if (ariaLabelledby) return;\n        setTitleId(newId);\n      },\n      [ariaLabelledby]\n    );\n    const setDescriptionIdCallback = useCallback(\n      (newId: string) => {\n        if (ariaDescribedby) return;\n        setDescriptionId(newId);\n      },\n      [ariaDescribedby]\n    );\n\n    const contextValue = useMemo<ModalProviderValue>(\n      () => ({\n        modalId: id,\n        setTitleId: setTitleIdCallback,\n        setDescriptionId: setDescriptionIdCallback,\n        autoFocus\n      }),\n      [id, setTitleIdCallback, setDescriptionIdCallback, autoFocus]\n    );\n\n    const onBackdropClick = useCallback<React.MouseEventHandler<HTMLDivElement>>(\n      e => {\n        if (!show || alertModal) return;\n        onClose(e);\n      },\n      [show, alertModal, onClose]\n    );\n\n    const onModalKeyDown = useCallback<React.KeyboardEventHandler<HTMLDivElement>>(\n      e => {\n        if (e.key !== keyCodes.ESCAPE || !show || alertModal) return;\n        onClose(e);\n      },\n      [alertModal, onClose, show]\n    );\n\n    const modalAnimationVariants =\n      size === \"full-view\"\n        ? modalAnimationFullViewVariants\n        : anchorElementRef?.current\n        ? modalAnimationAnchorPopVariants\n        : modalAnimationCenterPopVariants;\n\n    const zIndexStyle = zIndex ? ({ \"--monday-modal-z-index\": zIndex } as React.CSSProperties) : {};\n\n    const handleFocusLockWhiteList = useCallback(\n      (nextFocusedElement?: HTMLElement) => {\n        if (!onFocusAttempt) return true;\n\n        const outcome = onFocusAttempt(nextFocusedElement);\n\n        if (outcome === true) return true;\n\n        if (outcome instanceof HTMLElement) {\n          outcome.focus();\n          return false;\n        }\n\n        return false;\n      },\n      [onFocusAttempt]\n    );\n\n    return (\n      <AnimatePresence>\n        {show && (\n          <LayerProvider layerRef={containerRef}>\n            <ModalProvider value={contextValue}>\n              {createPortal(\n                <FocusLockComponent returnFocus autoFocus={autoFocus} whiteList={handleFocusLockWhiteList}>\n                  <div ref={containerRef} className={styles.container} style={zIndexStyle}>\n                    <motion.div\n                      variants={modalAnimationOverlayVariants}\n                      initial=\"initial\"\n                      animate=\"enter\"\n                      exit=\"exit\"\n                      data-testid={getTestId(ComponentDefaultTestId.MODAL_NEXT_OVERLAY, id)}\n                      className={styles.overlay}\n                      onClick={onBackdropClick}\n                      aria-hidden\n                    />\n                    <RemoveScroll forwardProps ref={modalMergedRef}>\n                      <motion.div\n                        variants={modalAnimationVariants}\n                        initial=\"exit\"\n                        animate=\"enter\"\n                        exit=\"exit\"\n                        custom={anchorElementRef}\n                        className={cx(\n                          styles.modal,\n                          getStyle(styles, camelCase(\"size-\" + size)),\n                          { [styles.withHeaderAction]: !!renderHeaderAction },\n                          className\n                        )}\n                        id={id}\n                        data-testid={dataTestId || getTestId(ComponentDefaultTestId.MODAL_NEXT, id)}\n                        role=\"dialog\"\n                        aria-modal\n                        aria-labelledby={ariaLabelledby || titleId}\n                        aria-describedby={ariaDescribedby || descriptionId}\n                        style={style}\n                        onKeyDown={onModalKeyDown}\n                        tabIndex={-1}\n                      >\n                        {children}\n                        <ModalTopActions\n                          renderAction={renderHeaderAction}\n                          theme={closeButtonTheme}\n                          closeButtonAriaLabel={closeButtonAriaLabel}\n                          onClose={onClose}\n                        />\n                      </motion.div>\n                    </RemoveScroll>\n                  </div>\n                </FocusLockComponent>,\n                portalTargetElement\n              )}\n            </ModalProvider>\n          </LayerProvider>\n        )}\n      </AnimatePresence>\n    );\n  }\n);\n\nexport default Modal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}