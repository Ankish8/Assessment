{"ast":null,"code":"import { slicedToArray as e, defineProperty as t } from \"../../../_virtual/_rollupPluginBabelHelpers.js\";\nimport { camelCase as o } from \"lodash-es\";\nimport { getStyle as i } from \"../../helpers/typesciptCssModulesHelper.js\";\nimport { getTestId as r, ComponentDefaultTestId as a } from \"../../tests/testIds.js\";\nimport n from \"classnames\";\nimport s, { useState as l, useRef as d, useCallback as m, useEffect as c, useMemo as u } from \"react\";\nimport { SwitchTransition as p, CSSTransition as f } from \"react-transition-group\";\nimport v from \"../../hooks/useEventListener/index.js\";\nimport E from \"../../hooks/useAfterFirstRender/index.js\";\nimport { NOOP as b } from \"../../utils/function-utils.js\";\nimport { CounterSize as j, CounterColor as x, CounterType as h } from \"./CounterConstants.js\";\nimport { withStaticPropsWithoutForwardRef as y } from \"../../types/withStaticProps.js\";\nimport \"../../utils/colors-vars-map.js\";\nimport A from \"./Counter.module.scss.js\";\nvar N = y(function (j) {\n  var x = j.className,\n    h = j.counterClassName,\n    y = j.count,\n    N = void 0 === y ? 0 : y,\n    k = j.size,\n    C = void 0 === k ? \"large\" : k,\n    g = j.kind,\n    w = void 0 === g ? \"fill\" : g,\n    L = j.color,\n    M = void 0 === L ? \"primary\" : L,\n    z = j.maxDigits,\n    D = void 0 === z ? 3 : z,\n    P = j.ariaLabeledBy,\n    R = void 0 === P ? \"\" : P,\n    T = j.ariaLabel,\n    B = void 0 === T ? \"\" : T,\n    H = j.id,\n    O = void 0 === H ? \"\" : H,\n    U = j.prefix,\n    _ = void 0 === U ? \"\" : U,\n    F = j.onMouseDown,\n    I = void 0 === F ? b : F,\n    S = j.noAnimation,\n    q = void 0 !== S && S,\n    G = j[\"data-testid\"],\n    J = l(!1),\n    K = e(J, 2),\n    Q = K[0],\n    V = K[1],\n    W = d(null),\n    X = m(function () {\n      V(!0);\n    }, [V]),\n    Y = m(function () {\n      V(!1);\n    }, [V]);\n  v({\n    eventName: \"animationend\",\n    callback: Y,\n    ref: W\n  });\n  var Z = E();\n  c(function () {\n    Z.current && X();\n  }, [N, Z, X]), c(function () {\n    D > 0 || console.error(\"Max digits must be a positive number\");\n  }, [D]);\n  var $ = u(function () {\n      return n(A.counter, i(A, o(\"size-\" + C)), i(A, o(\"kind-\" + w)), i(A, o(\"color-\" + M)), t({}, A.withAnimation, Q), h);\n    }, [C, w, M, Q, h]),\n    ee = \"counter\" + (O ? \"-\".concat(O) : \"\"),\n    te = (null == N ? void 0 : (\"\" + N).length) > D ? \"\".concat(Math.pow(10, D) - 1, \"+\") : N + \"\",\n    oe = s.createElement(\"span\", {\n      id: ee,\n      \"data-testid\": G || r(a.COUNTER, O)\n    }, _ + te);\n  return s.createElement(\"span\", {\n    className: x,\n    \"aria-label\": \"\".concat(B, \" \").concat(te),\n    \"aria-labelledby\": R,\n    onMouseDown: I\n  }, s.createElement(\"div\", {\n    className: $,\n    \"aria-label\": te,\n    ref: W\n  }, q ? oe : s.createElement(p, {\n    mode: \"out-in\"\n  }, s.createElement(f, {\n    key: te,\n    classNames: {\n      enter: A.fadeEnter,\n      enterActive: A.fadeEnterActive,\n      exit: A.fadeExit,\n      exitActive: A.fadeExitActive\n    },\n    addEndListener: function (e, t) {\n      e.addEventListener(\"transitionend\", t, !1);\n    }\n  }, s.createElement(\"span\", {\n    id: ee,\n    \"data-testid\": G || r(a.COUNTER, O)\n  }, _ + te)))));\n}, {\n  sizes: j,\n  colors: x,\n  kinds: h\n});\nexport { N as default };","map":{"version":3,"names":["N","y","j","x","className","h","counterClassName","count","k","size","C","g","kind","w","L","color","M","z","maxDigits","D","P","ariaLabeledBy","R","T","ariaLabel","B","H","id","O","U","prefix","_","F","onMouseDown","I","b","S","noAnimation","q","G","J","l","K","e","Q","V","W","d","X","m","Y","v","eventName","callback","ref","Z","E","c","current","console","error","$","u","n","A","counter","i","o","t","withAnimation","ee","concat","te","length","Math","pow","oe","s","createElement","r","a","COUNTER","p","mode","f","key","classNames","enter","fadeEnter","enterActive","fadeEnterActive","exit","fadeExit","exitActive","fadeExitActive","addEndListener","addEventListener","sizes","colors","kinds","default"],"sources":["/Users/ankish/Downloads/MA/MAPIT/untitledUi/node_modules/@vibe/core/src/components/Counter/Counter.tsx"],"sourcesContent":["import { camelCase } from \"lodash-es\";\nimport { getStyle } from \"../../helpers/typesciptCssModulesHelper\";\nimport { ComponentDefaultTestId, getTestId } from \"../../tests/test-ids-utils\";\nimport cx from \"classnames\";\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { CSSTransition, SwitchTransition } from \"react-transition-group\";\nimport useEventListener from \"../../hooks/useEventListener\";\nimport useAfterFirstRender from \"../../hooks/useAfterFirstRender\";\nimport { NOOP } from \"../../utils/function-utils\";\nimport {\n  CounterColor as CounterColorEnum,\n  CounterSize as CounterSizeEnum,\n  CounterType as CounterTypeEnum\n} from \"./CounterConstants\";\nimport { CounterColor, CounterSize, CounterType } from \"./Counter.types\";\nimport { VibeComponentProps, withStaticPropsWithoutForwardRef } from \"../../types\";\nimport styles from \"./Counter.module.scss\";\n\nexport interface CounterProps extends VibeComponentProps {\n  /**\n   * The ID of the element describing the counter.\n   */\n  ariaLabeledBy?: string;\n  /**\n   * Class name applied to the counter element.\n   */\n  counterClassName?: string;\n  /**\n   * The numeric value displayed in the counter.\n   */\n  count?: number;\n  /**\n   * The label of the counter for accessibility.\n   */\n  ariaLabel?: string;\n  /**\n   * The size of the counter.\n   */\n  size?: CounterSize;\n  /**\n   * The visual style of the counter.\n   */\n  kind?: CounterType;\n  /**\n   * The color of the counter.\n   */\n  color?: CounterColor;\n  /**\n   * The maximum number of digits displayed before truncation.\n   */\n  maxDigits?: number;\n  /**\n   * Text prepended to the counter value.\n   */\n  prefix?: string;\n  /**\n   * Callback fired when the counter is clicked.\n   */\n  onMouseDown?: (event: React.MouseEvent<HTMLSpanElement>) => void;\n  /**\n   * If true, disables counter animations.\n   */\n  noAnimation?: boolean;\n}\n\nconst Counter = ({\n  className,\n  counterClassName,\n  count = 0,\n  size = \"large\",\n  kind = \"fill\",\n  color = \"primary\",\n  maxDigits = 3,\n  ariaLabeledBy = \"\",\n  ariaLabel = \"\",\n  id = \"\",\n  prefix = \"\",\n  onMouseDown = NOOP,\n  noAnimation = false,\n  \"data-testid\": dataTestId\n}: CounterProps) => {\n  const [countChangeAnimationState, setCountChangeAnimationState] = useState(false);\n\n  const ref = useRef<HTMLDivElement>(null);\n\n  const setCountChangedAnimationActive = useCallback(() => {\n    setCountChangeAnimationState(true);\n  }, [setCountChangeAnimationState]);\n\n  const setCountChangedAnimationNotActive = useCallback(() => {\n    setCountChangeAnimationState(false);\n  }, [setCountChangeAnimationState]);\n\n  useEventListener({\n    eventName: \"animationend\",\n    callback: setCountChangedAnimationNotActive,\n    ref\n  });\n\n  const isAfterFirstRender = useAfterFirstRender();\n\n  useEffect(() => {\n    if (isAfterFirstRender.current) {\n      setCountChangedAnimationActive();\n    }\n  }, [count, isAfterFirstRender, setCountChangedAnimationActive]);\n\n  useEffect(() => {\n    if (maxDigits <= 0) {\n      console.error(\"Max digits must be a positive number\");\n    }\n  }, [maxDigits]);\n\n  const classNames = useMemo(() => {\n    return cx(\n      styles.counter,\n      getStyle(styles, camelCase(\"size-\" + size)),\n      getStyle(styles, camelCase(\"kind-\" + kind)),\n      getStyle(styles, camelCase(\"color-\" + color)),\n      {\n        [styles.withAnimation]: countChangeAnimationState\n      },\n      counterClassName\n    );\n  }, [size, kind, color, countChangeAnimationState, counterClassName]);\n\n  const counterId = \"counter\" + (id ? `-${id}` : \"\");\n  const countText = count?.toString().length > maxDigits ? `${10 ** maxDigits - 1}+` : String(count);\n  const counter = (\n    <span id={counterId} data-testid={dataTestId || getTestId(ComponentDefaultTestId.COUNTER, id)}>\n      {prefix + countText}\n    </span>\n  );\n\n  return (\n    <span\n      className={className}\n      aria-label={`${ariaLabel} ${countText}`}\n      aria-labelledby={ariaLabeledBy}\n      onMouseDown={onMouseDown}\n    >\n      <div className={classNames} aria-label={countText} ref={ref}>\n        {noAnimation ? (\n          counter\n        ) : (\n          <SwitchTransition mode=\"out-in\">\n            <CSSTransition\n              key={countText}\n              classNames={{\n                enter: styles.fadeEnter,\n                enterActive: styles.fadeEnterActive,\n                exit: styles.fadeExit,\n                exitActive: styles.fadeExitActive\n              }}\n              // @ts-expect-error @definitelyTyped typings expecting a single parameter for some reason when the function passed here is called with two parameters\n              // See https://github.com/reactjs/react-transition-group/blob/c89f807067b32eea6f68fd6c622190d88ced82e2/src/Transition.js#L522-L534\n              addEndListener={(node: HTMLElement, done: () => void) => {\n                node.addEventListener(\"transitionend\", done, false);\n              }}\n            >\n              <span id={counterId} data-testid={dataTestId || getTestId(ComponentDefaultTestId.COUNTER, id)}>\n                {prefix + countText}\n              </span>\n            </CSSTransition>\n          </SwitchTransition>\n        )}\n      </div>\n    </span>\n  );\n};\n\ninterface CounterStaticProps {\n  sizes: typeof CounterSizeEnum;\n  colors: typeof CounterColorEnum;\n  kinds: typeof CounterTypeEnum;\n}\n\nexport default withStaticPropsWithoutForwardRef<CounterProps, CounterStaticProps>(Counter, {\n  sizes: CounterSizeEnum,\n  colors: CounterColorEnum,\n  kinds: CounterTypeEnum\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}