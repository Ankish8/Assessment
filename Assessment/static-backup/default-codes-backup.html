<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Default Codes - Compilable Question</title>
    <style>
        /* Base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: #f9fafb;
            color: #101828;
            line-height: 1.5;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 32px 40px;
            width: 100%;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 32px;
        }

        .back-btn {
            width: 40px;
            height: 40px;
            background: #7f56d9;
            border: none;
            border-radius: 8px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 1px 2px rgba(16, 24, 40, 0.05);
            font-size: 20px;
        }

        .back-btn:hover {
            background: #6941c6;
        }

        .header-title {
            font-size: 30px;
            font-weight: 600;
            color: #101828;
            letter-spacing: -0.02em;
        }

        /* Progress Steps */
        .progress-container {
            margin-bottom: 32px;
        }

        .progress-steps {
            display: flex;
            align-items: center;
            gap: 8px;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .progress-steps::-webkit-scrollbar {
            display: none;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .step.active .step-number {
            background: #7f56d9;
            color: white;
            box-shadow: 0 0 0 4px #f4f3ff;
        }

        .step.completed .step-number {
            background: #7f56d9;
            color: white;
        }

        .step.inactive .step-number {
            background: #f9fafb;
            color: #667085;
            border: 1px solid #eaecf0;
        }

        .step-label {
            font-size: 14px;
            font-weight: 500;
        }

        .step.active .step-label {
            color: #101828;
        }

        .step.completed .step-label {
            color: #475467;
        }

        .step.inactive .step-label {
            color: #667085;
        }

        .step-divider {
            width: 20px;
            height: 1px;
            background: #eaecf0;
            flex-shrink: 0;
        }

        /* Main Content */
        .main-content {
            background: white;
            border-radius: 12px;
            border: 1px solid #eaecf0;
            overflow: hidden;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .content-header {
            padding: 24px;
            border-bottom: 1px solid #eaecf0;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #101828;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #f2f4f7;
            color: #667085;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
        }

        .section-description {
            font-size: 14px;
            color: #667085;
            margin: 0;
        }

        .content-body {
            padding: 24px;
            flex: 1;
            overflow-y: auto;
        }

        /* Toggle Card */
        .toggle-card {
            background: #f9fafb;
            border: 1px solid #eaecf0;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
        }

        .toggle-info h3 {
            font-size: 18px;
            font-weight: 600;
            color: #101828;
            margin-bottom: 4px;
        }

        .toggle-info p {
            font-size: 14px;
            color: #667085;
            margin: 0;
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #e4e7ec;
            transition: 0.4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        input:checked + .toggle-slider {
            background-color: #7f56d9;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(20px);
        }

        /* Language Selection */
        .language-section {
            display: none;
            animation: slideIn 0.3s ease;
        }

        .language-section.show {
            display: block;
        }

        .selection-header {
            margin-bottom: 20px;
        }

        .selection-header h4 {
            font-size: 16px;
            font-weight: 600;
            color: #101828;
            margin-bottom: 4px;
        }

        .selection-header p {
            font-size: 14px;
            color: #667085;
        }

        /* Two Column Layout */
        .two-column-layout {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 24px;
            height: 100%;
        }

        /* Language List */
        .language-list {
            background: #f9fafb;
            border: 1px solid #eaecf0;
            border-radius: 12px;
            padding: 16px;
            max-height: 500px;
            overflow-y: auto;
        }

        .language-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid transparent;
            position: relative;
        }

        .language-item:hover {
            background: white;
            border-color: #eaecf0;
            transform: translateX(2px);
        }

        .language-item.selected {
            background: white;
            border-color: #7f56d9;
            box-shadow: 0 0 0 3px rgba(127, 86, 217, 0.1);
        }

        .language-item.selected::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 60%;
            background: #7f56d9;
            border-radius: 0 3px 3px 0;
        }

        .language-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #d0d5dd;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            position: relative;
        }

        .language-item:hover .language-checkbox {
            border-color: #98a2b3;
        }

        .language-item.selected .language-checkbox {
            background: #7f56d9;
            border-color: #7f56d9;
            animation: checkPulse 0.3s ease;
        }

        .language-item.selected .language-checkbox::after {
            content: "✓";
            color: white;
            font-size: 12px;
            animation: checkAppear 0.2s ease;
        }

        @keyframes checkPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes checkAppear {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }

        .language-name {
            font-size: 14px;
            font-weight: 500;
            color: #344054;
        }

        .language-version {
            font-size: 12px;
            color: #667085;
        }

        /* Code Editor Section */
        .code-editor-section {
            background: #f9fafb;
            border: 1px solid #eaecf0;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .editor-header {
            background: white;
            padding: 20px 24px;
            border-bottom: 1px solid #eaecf0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-height: 60px;
        }

        .editor-title {
            font-size: 14px;
            font-weight: 600;
            color: #101828;
        }

        .editor-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .editor-btn {
            padding: 8px 12px;
            border: 1px solid #d0d5dd;
            border-radius: 8px;
            background: white;
            color: #344054;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            min-width: auto;
            white-space: nowrap;
        }

        .editor-btn svg {
            flex-shrink: 0;
        }

        .editor-btn.icon-only {
            padding: 8px;
            min-width: 36px;
            justify-content: center;
        }

        .editor-btn.compact {
            padding: 6px 8px;
            font-size: 12px;
        }

        .editor-btn:hover {
            background: #f9fafb;
            border-color: #98a2b3;
        }

        .code-editor {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
            font-size: 14px;
            line-height: 1.6;
            flex: 1;
            overflow: auto;
            white-space: pre-wrap;
            position: relative;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Dark theme (default) */
        .code-editor {
            background: #1e1e1e;
            color: #d4d4d4;
        }

        /* Light theme */
        .code-editor.light-theme {
            background: #ffffff;
            color: #333333;
            border-top: 1px solid #e4e7ec;
        }

        /* Code syntax highlighting - Dark theme */
        .keyword { color: #569cd6; }
        .string { color: #ce9178; }
        .comment { color: #6a9955; }
        .function { color: #dcdcaa; }
        .number { color: #b5cea8; }
        .operator { color: #d4d4d4; }
        .preprocessor { color: #c586c0; }

        /* Code syntax highlighting - Light theme */
        .light-theme .keyword { color: #0000ff; }
        .light-theme .string { color: #a31515; }
        .light-theme .comment { color: #008000; }
        .light-theme .function { color: #795e26; }
        .light-theme .number { color: #098658; }
        .light-theme .operator { color: #333333; }
        .light-theme .preprocessor { color: #af00db; }

        /* Advanced Options */
        .advanced-section {
            margin-top: 20px;
            padding: 20px;
            background: #f9fafb;
            border: 1px solid #eaecf0;
            border-radius: 12px;
        }

        .advanced-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            margin-bottom: 16px;
        }

        .advanced-header h4 {
            font-size: 14px;
            font-weight: 600;
            color: #344054;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .arrow-icon {
            transition: transform 0.3s ease;
        }

        .arrow-icon.open {
            transform: rotate(180deg);
        }

        .advanced-content {
            display: none;
        }

        .advanced-content.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .option-item {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            padding: 16px 0;
            border-bottom: 1px solid #eaecf0;
        }

        .option-item:last-child {
            border-bottom: none;
        }

        .option-info {
            flex: 1;
            margin-right: 16px;
        }

        .option-label {
            font-size: 14px;
            font-weight: 500;
            color: #344054;
            margin-bottom: 4px;
        }

        .option-description {
            font-size: 13px;
            color: #667085;
        }

        .code-example {
            background: #f2f4f7;
            padding: 12px;
            border-radius: 6px;
            margin-top: 8px;
            font-family: monospace;
            font-size: 12px;
            color: #475467;
        }

        /* Bottom Actions */
        .bottom-actions {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 24px 32px;
            background: white;
            border: 1px solid #eaecf0;
            border-radius: 12px;
            margin-top: 24px;
        }

        /* Buttons */
        .btn-primary, .btn-secondary {
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            position: relative;
        }

        /* Keyboard shortcuts in buttons */
        .keyboard-shortcut {
            font-size: 12px;
            opacity: 0.7;
            margin-left: 12px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: #7f56d9;
            color: white;
            border-color: #7f56d9;
        }

        .btn-primary:hover {
            background: #6941c6;
            border-color: #6941c6;
        }

        .btn-secondary {
            background: white;
            color: #344054;
            border-color: #d0d5dd;
        }

        .btn-secondary:hover {
            background: #f9fafb;
            border-color: #98a2b3;
        }

        /* Success Badge */
        .success-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #ecfdf3;
            color: #067647;
            padding: 4px 10px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 500;
            margin-left: 12px;
            animation: fadeInScale 0.3s ease;
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .success-badge svg {
            width: 12px;
            height: 12px;
        }

        /* Animations */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                max-height: 0;
            }
            to {
                opacity: 1;
                max-height: 500px;
            }
        }

        /* Loading Spinner */
        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #e4e7ec;
            border-top: 2px solid #7f56d9;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Notification styles */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            pointer-events: none;
        }

        .notification {
            background: white;
            border: 1px solid #eaecf0;
            border-radius: 8px;
            padding: 12px 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.3s ease;
            pointer-events: auto;
            max-width: 320px;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        .notification-icon {
            font-size: 16px;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-size: 13px;
            font-weight: 600;
            color: #101828;
            margin-bottom: 2px;
        }

        .notification-message {
            font-size: 12px;
            color: #667085;
        }

        .notification-close {
            width: 20px;
            height: 20px;
            border: none;
            background: none;
            color: #98a2b3;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .notification-close:hover {
            background: #f2f4f7;
            color: #667085;
        }

        /* Shortcut help modal */
        .shortcut-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .shortcut-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .shortcut-modal-content {
            background: white;
            border-radius: 12px;
            padding: 32px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .shortcut-modal.show .shortcut-modal-content {
            transform: scale(1);
        }

        .shortcut-modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .shortcut-modal-title {
            font-size: 20px;
            font-weight: 600;
            color: #101828;
        }

        .shortcut-group {
            margin-bottom: 24px;
        }

        .shortcut-group-title {
            font-size: 14px;
            font-weight: 600;
            color: #344054;
            margin-bottom: 12px;
        }

        .shortcut-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f2f4f7;
        }

        .shortcut-item:last-child {
            border-bottom: none;
        }

        .shortcut-description {
            font-size: 13px;
            color: #667085;
        }

        .shortcut-keys {
            display: flex;
            gap: 4px;
        }

        .shortcut-key {
            background: #f2f4f7;
            border: 1px solid #eaecf0;
            border-radius: 4px;
            padding: 2px 8px;
            font-size: 12px;
            font-weight: 500;
            color: #344054;
            font-family: monospace;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }
            
            .two-column-layout {
                grid-template-columns: 1fr;
            }
            
            .bottom-actions {
                flex-direction: column;
                gap: 16px;
            }
            
            .bottom-actions > * {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <button class="back-btn" onclick="goToPreviousSection()">
                ←
            </button>
            <h1 class="header-title">Compilable Question</h1>
        </div>

        <!-- Progress Steps -->
        <div class="progress-container">
            <div class="progress-steps">
                <div class="step completed">
                    <div class="step-number">1</div>
                    <div class="step-label">Question Statement</div>
                </div>
                <div class="step-divider"></div>
                <div class="step completed">
                    <div class="step-number">2</div>
                    <div class="step-label">Test Cases</div>
                </div>
                <div class="step-divider"></div>
                <div class="step active">
                    <div class="step-number">3</div>
                    <div class="step-label">Default Codes</div>
                </div>
                <div class="step-divider"></div>
                <div class="step inactive">
                    <div class="step-number">4</div>
                    <div class="step-label">Question Details</div>
                </div>
                <div class="step-divider"></div>
                <div class="step inactive">
                    <div class="step-number">5</div>
                    <div class="step-label">Solution Details</div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="content-header">
                <h2 class="section-title">
                    Default Codes
                    <div class="info-icon">?</div>
                </h2>
                <p class="section-description">Provide starter code templates for candidates in their preferred programming language.</p>
            </div>

            <div class="content-body">
                <!-- Toggle Card -->
                <div class="toggle-card">
                    <div class="toggle-info">
                        <h3>Provide starter code</h3>
                        <p>Give candidates a basic code template to get started faster</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="defaultCodeToggle" onchange="toggleDefaultCode()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <!-- Language Selection Section -->
                <div class="language-section" id="languageSection">
                    <div class="selection-header">
                        <h4>Select languages and provide starter code</h4>
                        <p>Choose which languages candidates can use and provide appropriate starter code for each.</p>
                    </div>

                    <div class="two-column-layout">
                        <!-- Language List -->
                        <div class="language-list">
                            <div class="language-item" data-lang="java" onclick="selectLanguage('java')">
                                <div class="language-checkbox"></div>
                                <div>
                                    <div class="language-name">Java</div>
                                    <div class="language-version">(1.8)</div>
                                </div>
                            </div>
                            <div class="language-item selected" data-lang="c" onclick="selectLanguage('c')">
                                <div class="language-checkbox"></div>
                                <div>
                                    <div class="language-name">C</div>
                                    <div class="language-version">(gcc 9.3.1)</div>
                                </div>
                            </div>
                            <div class="language-item" data-lang="cpp" onclick="selectLanguage('cpp')">
                                <div class="language-checkbox"></div>
                                <div>
                                    <div class="language-name">C++</div>
                                    <div class="language-version">(gcc 9.3.1)</div>
                                </div>
                            </div>
                            <div class="language-item" data-lang="ruby" onclick="selectLanguage('ruby')">
                                <div class="language-checkbox"></div>
                                <div>
                                    <div class="language-name">Ruby</div>
                                    <div class="language-version">(2.0.0)</div>
                                </div>
                            </div>
                            <div class="language-item" data-lang="python" onclick="selectLanguage('python')">
                                <div class="language-checkbox"></div>
                                <div>
                                    <div class="language-name">Python</div>
                                    <div class="language-version">(2.7.5)</div>
                                </div>
                            </div>
                            <div class="language-item" data-lang="php" onclick="selectLanguage('php')">
                                <div class="language-checkbox"></div>
                                <div>
                                    <div class="language-name">PHP</div>
                                    <div class="language-version">(5.4)</div>
                                </div>
                            </div>
                            <div class="language-item" data-lang="javascript" onclick="selectLanguage('javascript')">
                                <div class="language-checkbox"></div>
                                <div>
                                    <div class="language-name">JavaScript</div>
                                    <div class="language-version">(Node.js v16.17.1)</div>
                                </div>
                            </div>
                            <div class="language-item" data-lang="python3" onclick="selectLanguage('python3')">
                                <div class="language-checkbox"></div>
                                <div>
                                    <div class="language-name">Python 3</div>
                                    <div class="language-version">(3.6.4)</div>
                                </div>
                            </div>
                            <div class="language-item" data-lang="scala" onclick="selectLanguage('scala')">
                                <div class="language-checkbox"></div>
                                <div>
                                    <div class="language-name">Scala</div>
                                    <div class="language-version">(2.12.1)</div>
                                </div>
                            </div>
                            <div class="language-item" data-lang="vb" onclick="selectLanguage('vb')">
                                <div class="language-checkbox"></div>
                                <div>
                                    <div class="language-name">VB</div>
                                    <div class="language-version">(4.6.1)</div>
                                </div>
                            </div>
                            <div class="language-item" data-lang="kotlin" onclick="selectLanguage('kotlin')">
                                <div class="language-checkbox"></div>
                                <div>
                                    <div class="language-name">Kotlin</div>
                                    <div class="language-version">(1.5.31)</div>
                                </div>
                            </div>
                        </div>

                        <!-- Code Editor -->
                        <div class="code-editor-section">
                            <div class="editor-header">
                                <div class="editor-title">
                                    <span style="color: #667085; font-size: 12px; font-weight: 500;">Language:</span>
                                    <span id="currentLanguage" style="margin-left: 6px;">C (gcc 9.3.1)</span>
                                    <span class="success-badge" id="savedBadge" style="display: none;">
                                        <svg viewBox="0 0 12 12" fill="none">
                                            <path d="M10 3L4.5 8.5L2 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        Saved
                                    </span>
                                </div>
                                <div class="editor-actions">
                                    <button class="editor-btn icon-only" onclick="toggleTheme()" title="Toggle theme (⌘T)">
                                        <svg width="16" height="16" viewBox="0 0 14 14" fill="none" id="themeIcon">
                                            <path d="M7 10C8.65685 10 10 8.65685 10 7C10 5.34315 8.65685 4 7 4C5.34315 4 4 5.34315 4 7C4 8.65685 5.34315 10 7 10Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M7 1V2M7 12V13M1 7H2M12 7H13M2.05 2.05L2.757 2.757M11.243 11.243L11.95 11.95M2.05 11.95L2.757 11.243M11.243 2.757L11.95 2.05" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </button>
                                    <div style="width: 1px; height: 20px; background: #eaecf0;"></div>
                                    <button class="editor-btn compact" onclick="copyCode()" title="Copy code (⌘C)">
                                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                                            <path d="M4.66667 4.66667V3.33333C4.66667 2.59695 5.26362 2 6 2H10.6667C11.403 2 12 2.59695 12 3.33333V8C12 8.73638 11.403 9.33333 10.6667 9.33333H9.33333M4.66667 4.66667H3.33333C2.59695 4.66667 2 5.26362 2 6V10.6667C2 11.403 2.59695 12 3.33333 12H8C8.73638 12 9.33333 11.403 9.33333 10.6667V9.33333M4.66667 4.66667H8C8.73638 4.66667 9.33333 5.26362 9.33333 6V9.33333" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        Copy
                                    </button>
                                    <button class="editor-btn compact" onclick="formatCode()" title="Format code (⌘⇧F)">Format</button>
                                    <button class="editor-btn compact" onclick="resetCode()" title="Reset code">Reset</button>
                                </div>
                            </div>
                            <div class="code-editor" id="codeEditor" contenteditable="true" spellcheck="false">#include &lt;stdio.h&gt;

int main() {
    // Your solution here
    
    return 0;
}</div>
                        </div>
                    </div>

                    <!-- Advanced Options -->
                    <div class="advanced-section">
                        <div class="advanced-header" onclick="toggleAdvanced()">
                            <h4>
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" class="arrow-icon" id="advancedArrow">
                                    <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Advanced Options
                            </h4>
                        </div>
                        <div class="advanced-content" id="advancedContent">
                            <div class="option-item">
                                <div class="option-info">
                                    <div class="option-label">Show specific code block only</div>
                                    <div class="option-description">
                                        Use &lt;showDefaultCode&gt; tags to show only editable sections to candidates
                                    </div>
                                    <div class="code-example">
                                        Your code<br>
                                        &lt;showDefaultCode&gt;<br>
                                        &nbsp;&nbsp;// Editable section<br>
                                        &lt;/showDefaultCode&gt;<br>
                                        Your code
                                    </div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="showCodeBlockToggle">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Actions -->
        <div class="bottom-actions">
            <button class="btn-secondary" onclick="goToPreviousSection()">
                Previous
                <span class="keyboard-shortcut">⌘←</span>
            </button>
            <button class="btn-primary" onclick="saveAndContinue()">
                <span id="saveButtonText">Save & Continue</span>
                <span class="keyboard-shortcut">⌘S</span>
            </button>
        </div>
    </div>

    <script>
        // State management
        let selectedLanguages = new Set(['c']);
        let currentLanguage = 'c';
        let actionCounts = {}; // Track user actions
        let shownNotifications = new Set(); // Track shown notifications
        let codeTemplates = {
            java: `public class Solution {
    public static void main(String[] args) {
        // Your solution here
        
    }
}`,
            c: `#include <stdio.h>

int main() {
    // Your solution here
    
    return 0;
}`,
            cpp: `#include <iostream>
using namespace std;

int main() {
    // Your solution here
    
    return 0;
}`,
            python: `# Your solution here
`,
            python3: `# Your solution here
`,
            ruby: `# Your solution here
`,
            php: `<?php
// Your solution here
?>`,
            javascript: `// Your solution here
`,
            scala: `object Solution {
    def main(args: Array[String]) {
        // Your solution here
    }
}`,
            vb: `Module Solution
    Sub Main()
        ' Your solution here
    End Sub
End Module`,
            kotlin: `fun main() {
    // Your solution here
}`
        };

        // Progress tracking
        let progressData = {
            currentStep: 3,
            totalSteps: 5,
            stepCompletion: {
                1: { completed: true, percentage: 100, timestamp: new Date() },
                2: { completed: true, percentage: 100, timestamp: new Date() },
                3: { completed: false, percentage: 0, timestamp: null },
                4: { completed: false, percentage: 0, timestamp: null },
                5: { completed: false, percentage: 0, timestamp: null }
            }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadSavedState();
            // Load theme preference
            const savedTheme = localStorage.getItem('editorTheme') || 'dark';
            if (savedTheme === 'light') {
                document.getElementById('codeEditor').classList.add('light-theme');
                updateThemeIcon(true);
            }
            
            // Initialize keyboard shortcuts
            initializeKeyboardShortcuts();
            
            // Load action counts and shown notifications
            actionCounts = JSON.parse(localStorage.getItem('actionCounts') || '{}');
            shownNotifications = new Set(JSON.parse(localStorage.getItem('shownNotifications') || '[]'));
            
            // Load progress data
            const savedProgress = localStorage.getItem('questionProgress');
            if (savedProgress) {
                progressData = JSON.parse(savedProgress);
            }
            
            // Initialize progress tracking
            initializeProgressTracking();
            updateProgressDisplay();
        });

        // Toggle default code
        function toggleDefaultCode() {
            const toggle = document.getElementById('defaultCodeToggle');
            const section = document.getElementById('languageSection');
            
            if (toggle.checked) {
                section.classList.add('show');
            } else {
                section.classList.remove('show');
            }
        }

        // Select language
        function selectLanguage(lang) {
            const item = document.querySelector(`[data-lang="${lang}"]`);
            
            if (selectedLanguages.has(lang)) {
                selectedLanguages.delete(lang);
                item.classList.remove('selected');
            } else {
                selectedLanguages.add(lang);
                item.classList.add('selected');
            }

            // If selecting a new language, make it current
            if (selectedLanguages.has(lang)) {
                currentLanguage = lang;
                loadCodeForLanguage(lang);
            }
        }

        // Load code for language
        function loadCodeForLanguage(lang) {
            const editor = document.getElementById('codeEditor');
            const langDisplay = document.getElementById('currentLanguage');
            
            // Update display
            const langItem = document.querySelector(`[data-lang="${lang}"]`);
            const langName = langItem.querySelector('.language-name').textContent;
            const langVersion = langItem.querySelector('.language-version').textContent;
            langDisplay.textContent = `${langName} ${langVersion}`;
            
            // Load code
            editor.textContent = codeTemplates[lang] || '// No template available';
        }

        // Toggle theme
        function toggleTheme() {
            const editor = document.getElementById('codeEditor');
            const isLight = editor.classList.toggle('light-theme');
            
            // Save preference
            localStorage.setItem('editorTheme', isLight ? 'light' : 'dark');
            
            // Update icon
            updateThemeIcon(isLight);
        }

        // Update theme icon
        function updateThemeIcon(isLight) {
            const icon = document.getElementById('themeIcon');
            if (isLight) {
                // Moon icon for light theme
                icon.innerHTML = '<path d="M11 8C11 10.7614 8.76142 13 6 13C3.23858 13 1 10.7614 1 8C1 5.23858 3.23858 3 6 3C6.36812 3 6.72542 3.04633 7.06613 3.13384C6.42006 3.83808 6 4.78615 6 5.83333C6 7.95042 7.71625 9.66667 9.83333 9.66667C10.8805 9.66667 11.8286 9.24661 12.5328 8.60054C12.6203 8.94125 12.6667 9.29855 12.6667 9.66667C12.6667 10.5871 11.9205 11.3333 11 11.3333" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>';
            } else {
                // Sun icon for dark theme
                icon.innerHTML = '<path d="M7 10C8.65685 10 10 8.65685 10 7C10 5.34315 8.65685 4 7 4C5.34315 4 4 5.34315 4 7C4 8.65685 5.34315 10 7 10Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 1V2M7 12V13M1 7H2M12 7H13M2.05 2.05L2.757 2.757M11.243 11.243L11.95 11.95M2.05 11.95L2.757 11.243M11.243 2.757L11.95 2.05" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>';
            }
        }

        // Copy code to clipboard
        function copyCode() {
            const editor = document.getElementById('codeEditor');
            const text = editor.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                // Show success feedback
                const button = event.target.closest('.editor-btn');
                const originalText = button.innerHTML;
                button.innerHTML = '<svg width="14" height="14" viewBox="0 0 14 14" fill="none" style="vertical-align: middle;"><path d="M11.6667 3.5L5.25 9.91667L2.33333 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg> Copied!';
                button.style.color = '#067647';
                
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.style.color = '';
                }, 2000);
            });
        }

        // Format code
        function formatCode() {
            const editor = document.getElementById('codeEditor');
            // Basic formatting - trim whitespace
            editor.textContent = editor.textContent.trim();
            showSavedBadge();
        }

        // Reset code
        function resetCode() {
            const editor = document.getElementById('codeEditor');
            editor.textContent = codeTemplates[currentLanguage];
            showSavedBadge();
        }

        // Toggle advanced options
        function toggleAdvanced() {
            const content = document.getElementById('advancedContent');
            const arrow = document.getElementById('advancedArrow');
            
            if (content.classList.contains('show')) {
                content.classList.remove('show');
                arrow.classList.remove('open');
            } else {
                content.classList.add('show');
                arrow.classList.add('open');
            }
        }

        // Save state
        function saveState() {
            const state = {
                defaultCodeEnabled: document.getElementById('defaultCodeToggle').checked,
                selectedLanguages: Array.from(selectedLanguages),
                currentLanguage: currentLanguage,
                codeTemplates: codeTemplates,
                showCodeBlock: document.getElementById('showCodeBlockToggle').checked
            };
            
            localStorage.setItem('defaultCodeState', JSON.stringify(state));
        }

        // Load saved state
        function loadSavedState() {
            const saved = localStorage.getItem('defaultCodeState');
            if (saved) {
                const state = JSON.parse(saved);
                
                // Restore toggle
                document.getElementById('defaultCodeToggle').checked = state.defaultCodeEnabled;
                if (state.defaultCodeEnabled) {
                    document.getElementById('languageSection').classList.add('show');
                }
                
                // Restore language selections
                selectedLanguages = new Set(state.selectedLanguages);
                selectedLanguages.forEach(lang => {
                    document.querySelector(`[data-lang="${lang}"]`).classList.add('selected');
                });
                
                // Restore current language
                currentLanguage = state.currentLanguage;
                loadCodeForLanguage(currentLanguage);
                
                // Restore code templates
                if (state.codeTemplates) {
                    codeTemplates = state.codeTemplates;
                }
                
                // Restore advanced options
                document.getElementById('showCodeBlockToggle').checked = state.showCodeBlock || false;
            }
        }

        // Show saved badge
        function showSavedBadge() {
            const badge = document.getElementById('savedBadge');
            badge.style.display = 'inline-flex';
            
            setTimeout(() => {
                badge.style.display = 'none';
            }, 2000);
        }

        // Navigation
        function goToPreviousSection() {
            window.location.href = 'index.html';
        }

        function saveAndContinue() {
            const button = document.querySelector('.btn-primary');
            const buttonText = document.getElementById('saveButtonText');
            
            // Validate if default code is enabled
            if (document.getElementById('defaultCodeToggle').checked) {
                // Check if any language is selected
                if (selectedLanguages.size === 0) {
                    alert('Please select at least one programming language.');
                    return;
                }
                
                // Check if all selected languages have non-empty code
                for (const lang of selectedLanguages) {
                    const code = codeTemplates[lang];
                    if (!code || code.trim().length === 0) {
                        alert(`Please provide starter code for ${lang.toUpperCase()} or deselect it.`);
                        return;
                    }
                }
            }
            
            // Show loading
            buttonText.innerHTML = '<span class="loading-spinner"></span>Saving...';
            
            // Save state
            saveState();
            
            // Navigate after delay
            setTimeout(() => {
                window.location.href = 'question-details.html';
            }, 500);
        }

        // Auto-save on changes
        document.getElementById('codeEditor').addEventListener('input', function() {
            // Save current code
            codeTemplates[currentLanguage] = this.textContent;
            
            // Debounced save
            clearTimeout(window.saveTimeout);
            window.saveTimeout = setTimeout(() => {
                saveState();
                showSavedBadge();
            }, 1000);
        });

        // Track actions and show notifications
        function trackAction(action) {
            actionCounts[action] = (actionCounts[action] || 0) + 1;
            localStorage.setItem('actionCounts', JSON.stringify(actionCounts));
            
            // Show notification for specific actions after certain counts
            const notifications = {
                'save': { count: 3, message: '💡 Pro tip: Use ⌘S to save quickly' },
                'copy': { count: 2, message: '✨ Use ⌘C when code is focused to copy faster' },
                'format': { count: 2, message: '⚡ Press ⌘⇧F to format code instantly' },
                'theme': { count: 2, message: '🎨 Toggle theme quickly with ⌘T' }
            };
            
            const notif = notifications[action];
            if (notif && actionCounts[action] === notif.count && !shownNotifications.has(action)) {
                showNotification(notif.message);
                shownNotifications.add(action);
                localStorage.setItem('shownNotifications', JSON.stringify(Array.from(shownNotifications)));
            }
        }

        // Show notification
        function showNotification(message) {
            const container = document.getElementById('notificationContainer');
            const notif = document.createElement('div');
            notif.className = 'notification';
            notif.innerHTML = `
                <span class="notification-icon">💡</span>
                <div class="notification-content">
                    <div class="notification-message">${message}</div>
                </div>
                <button class="notification-close" onclick="this.parentElement.remove()">
                    <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                        <path d="M10.5 3.5L3.5 10.5M3.5 3.5L10.5 10.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            `;
            
            container.appendChild(notif);
            
            // Trigger animation
            setTimeout(() => notif.classList.add('show'), 10);
            
            // Auto dismiss after 5 seconds
            setTimeout(() => {
                notif.classList.remove('show');
                setTimeout(() => notif.remove(), 300);
            }, 5000);
        }

        // Initialize keyboard shortcuts
        function initializeKeyboardShortcuts() {
            document.addEventListener('keydown', function(e) {
                // Show help with ?
                if (e.key === '?' && !e.metaKey && !e.ctrlKey) {
                    e.preventDefault();
                    showShortcutModal();
                }
                
                // Cmd/Ctrl + S: Save
                if ((e.metaKey || e.ctrlKey) && e.key === 's') {
                    e.preventDefault();
                    saveAndContinue();
                }
                
                // Cmd/Ctrl + Left Arrow: Previous
                if ((e.metaKey || e.ctrlKey) && e.key === 'ArrowLeft') {
                    e.preventDefault();
                    goToPreviousSection();
                }
                
                // Cmd/Ctrl + T: Toggle theme
                if ((e.metaKey || e.ctrlKey) && e.key === 't') {
                    e.preventDefault();
                    toggleTheme();
                }
                
                // Cmd/Ctrl + Shift + F: Format code
                if ((e.metaKey || e.ctrlKey) && e.shiftKey && e.key === 'F') {
                    e.preventDefault();
                    formatCode();
                }
                
                // Escape: Close modal
                if (e.key === 'Escape') {
                    closeShortcutModal();
                }
            });
        }

        // Show shortcut modal
        function showShortcutModal() {
            const modal = document.getElementById('shortcutModal');
            modal.classList.add('show');
        }

        // Close shortcut modal
        function closeShortcutModal() {
            const modal = document.getElementById('shortcutModal');
            modal.classList.remove('show');
        }

        // Update existing functions to track actions
        const originalSaveAndContinue = saveAndContinue;
        saveAndContinue = function() {
            trackAction('save');
            originalSaveAndContinue();
        };

        const originalCopyCode = copyCode;
        copyCode = function() {
            trackAction('copy');
            originalCopyCode();
        };

        const originalFormatCode = formatCode;
        formatCode = function() {
            trackAction('format');
            originalFormatCode();
        };

        const originalToggleTheme = toggleTheme;
        toggleTheme = function() {
            trackAction('theme');
            originalToggleTheme();
        };

        // Progress tracking functions
        function initializeProgressTracking() {
            // Track page interaction to update current step progress
            document.addEventListener('change', updateCurrentStepProgress);
            document.addEventListener('input', debounce(updateCurrentStepProgress, 500));
            
            // Auto-save progress periodically
            setInterval(saveProgressData, 30000); // Save every 30 seconds
        }

        function updateProgressDisplay() {
            const percentage = calculateOverallProgress();
            const progressBar = document.getElementById('progressBar');
            const progressPercentage = document.getElementById('progressPercentage');
            const progressStatus = document.getElementById('progressStatus');
            
            if (progressBar) progressBar.style.width = percentage + '%';
            if (progressPercentage) progressPercentage.textContent = Math.round(percentage) + '%';
            if (progressStatus) progressStatus.textContent = `Step ${progressData.currentStep} of ${progressData.totalSteps}`;
        }

        function calculateOverallProgress() {
            const completedSteps = Object.values(progressData.stepCompletion).filter(step => step.completed).length;
            const currentStepProgress = progressData.stepCompletion[progressData.currentStep].percentage;
            
            return (completedSteps * 100 + currentStepProgress) / progressData.totalSteps;
        }

        function updateCurrentStepProgress() {
            const currentStep = progressData.currentStep;
            let percentage = 0;
            
            // Calculate progress based on current page state
            const isDefaultCodeEnabled = document.getElementById('defaultCodeToggle').checked;
            if (isDefaultCodeEnabled) {
                percentage += 30; // Toggle enabled
                
                if (selectedLanguages.size > 0) {
                    percentage += 30; // Languages selected
                    
                    // Check if all selected languages have code
                    let languagesWithCode = 0;
                    for (const lang of selectedLanguages) {
                        if (codeTemplates[lang] && codeTemplates[lang].trim().length > 0) {
                            languagesWithCode++;
                        }
                    }
                    
                    if (languagesWithCode === selectedLanguages.size) {
                        percentage += 40; // All languages have code
                    } else {
                        percentage += (languagesWithCode / selectedLanguages.size) * 40;
                    }
                }
            } else {
                percentage = 100; // If not using default code, consider complete
            }
            
            progressData.stepCompletion[currentStep].percentage = Math.min(percentage, 100);
            progressData.stepCompletion[currentStep].timestamp = new Date();
            
            updateProgressDisplay();
            showAutoSaveIndicator();
            saveProgressData();
        }

        function navigateToStep(stepNumber) {
            if (stepNumber < progressData.currentStep || progressData.stepCompletion[stepNumber].completed) {
                // Allow navigation to previous or completed steps
                // In a real app, you'd navigate to the actual page
                console.log(`Navigating to step ${stepNumber}`);
            }
        }

        function markStepComplete(stepNumber) {
            progressData.stepCompletion[stepNumber].completed = true;
            progressData.stepCompletion[stepNumber].percentage = 100;
            progressData.stepCompletion[stepNumber].timestamp = new Date();
            
            updateProgressDisplay();
            saveProgressData();
        }

        function showAutoSaveIndicator(saving = false) {
            const indicator = document.getElementById('autoSaveIndicator');
            const spinner = document.getElementById('saveSpinner');
            const text = document.getElementById('saveText');
            
            if (!indicator) return;
            
            indicator.classList.add('show');
            
            if (saving) {
                indicator.classList.add('saving');
                spinner.style.display = 'block';
                text.textContent = 'Saving...';
            } else {
                indicator.classList.remove('saving');
                spinner.style.display = 'none';
                text.textContent = 'All changes saved';
                
                // Auto-hide after 3 seconds
                setTimeout(() => {
                    indicator.classList.remove('show');
                }, 3000);
            }
        }

        function saveProgressData() {
            showAutoSaveIndicator(true);
            
            // Simulate save delay
            setTimeout(() => {
                localStorage.setItem('questionProgress', JSON.stringify(progressData));
                showAutoSaveIndicator(false);
            }, 500);
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Update save and continue to mark step as complete
        const originalSaveAndContinueFunc = saveAndContinue;
        saveAndContinue = function() {
            // Mark current step as complete before continuing
            markStepComplete(progressData.currentStep);
            
            // Update to next step
            if (progressData.currentStep < progressData.totalSteps) {
                progressData.currentStep++;
            }
            
            trackAction('save');
            originalSaveAndContinueFunc();
        };
    </script>
    <!-- Notification Container -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- Shortcut Help Modal -->
    <div class="shortcut-modal" id="shortcutModal">
        <div class="shortcut-modal-content">
            <div class="shortcut-modal-header">
                <h2 class="shortcut-modal-title">Keyboard Shortcuts</h2>
                <button class="notification-close" onclick="closeShortcutModal()">
                    <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                        <path d="M10.5 3.5L3.5 10.5M3.5 3.5L10.5 10.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            
            <div class="shortcut-group">
                <h3 class="shortcut-group-title">Navigation</h3>
                <div class="shortcut-item">
                    <span class="shortcut-description">Save & Continue</span>
                    <div class="shortcut-keys">
                        <span class="shortcut-key">⌘</span>
                        <span class="shortcut-key">S</span>
                    </div>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-description">Go to Previous</span>
                    <div class="shortcut-keys">
                        <span class="shortcut-key">⌘</span>
                        <span class="shortcut-key">←</span>
                    </div>
                </div>
            </div>
            
            <div class="shortcut-group">
                <h3 class="shortcut-group-title">Editor</h3>
                <div class="shortcut-item">
                    <span class="shortcut-description">Toggle Theme</span>
                    <div class="shortcut-keys">
                        <span class="shortcut-key">⌘</span>
                        <span class="shortcut-key">T</span>
                    </div>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-description">Copy Code</span>
                    <div class="shortcut-keys">
                        <span class="shortcut-key">⌘</span>
                        <span class="shortcut-key">C</span>
                    </div>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-description">Format Code</span>
                    <div class="shortcut-keys">
                        <span class="shortcut-key">⌘</span>
                        <span class="shortcut-key">Shift</span>
                        <span class="shortcut-key">F</span>
                    </div>
                </div>
            </div>
            
            <div class="shortcut-group">
                <h3 class="shortcut-group-title">General</h3>
                <div class="shortcut-item">
                    <span class="shortcut-description">Show Keyboard Shortcuts</span>
                    <div class="shortcut-keys">
                        <span class="shortcut-key">?</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>